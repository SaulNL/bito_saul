<ion-header>
  <ion-toolbar class="tolbar">
    <ion-title>Mi bolsa
      <ion-icon name="bag-handle-outline"></ion-icon>
    </ion-title>
    <ion-buttons slot="end" (click)="cerrarModal()">
      <ion-button>
        <ion-icon name="close-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>



<ion-content>
  <ion-list *ngIf="tipoEnvio !== undefined">
    <ion-radio-group (ionChange)="cambiarTipo($event)" [value]="tipoEnvio">
      <ion-list-header>
        <ion-label>
          Tipo de entrega
        </ion-label>
      </ion-list-header>

      <ion-item *ngIf="_entregaDomicilio === 1">
        <ion-label>Envio a domicilio</ion-label>
        <ion-radio [value]="2" ></ion-radio>
      </ion-item>

      <ion-item *ngIf="_entregaSitio === 1">
        <ion-label>Recoger en sucursal</ion-label>
        <ion-radio [value]="3"></ion-radio>
      </ion-item>

      <ion-item *ngIf="_consumoSitio === 1">
        <ion-label>Consumo en sitio</ion-label>
        <ion-radio [value]="1"></ion-radio>
      </ion-item>
    </ion-radio-group>
    <!-- <ion-item>
      <ion-label position="floating">Comentario:</ion-label>
      <ion-textarea type="text" [(ngModel)]="detalle"></ion-textarea>
      <ion-icon *ngIf="detalle" (click)="detalle=''" name="close-outline" slot="end"></ion-icon>
    </ion-item> -->
  </ion-list>
  
  <ion-list>
    <div *ngIf="tipoEnvio === 2">
      <ion-grid *ngIf="this.blnUbicacion; else elseBlock">
        <ion-row>
          <ion-col>
            <div id="mapIdPedido" style="height:200px"></div>
          </ion-col>
        </ion-row>
        <p class="ion-text-center">{{estasUbicacion}}</p>
        <ion-row class="ion-align-items-center">
          <ion-col class="ion-text-center">
            <ion-button size="small" class="bg-rosa " type="button" (click)="localizacionTiempo(1)">
              <ion-icon name="navigate-circle-outline"></ion-icon>
              Ubicación Actual
            </ion-button>
          </ion-col>
        </ion-row>
      </ion-grid>
      <ng-template #elseBlock>
        <ion-grid>
          <ion-row class="ion-align-items-center">
            <ion-col class="ion-text-center">
              <ion-chip color="danger"  class="ion-align-items-center">
                <ion-label><strong>Lo sentimos!</strong>Debes habilitar tu ubicación.</ion-label>
              </ion-chip>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ng-template>
    </div>
    <h3 class="ion-text-center">Lista de artículos</h3>
    <ion-item *ngFor="let p of lista; let i = index">
     <ion-grid>
        <ion-row>
          <ion-col size="2">
            <img [srcset]="p.imagen">
            <ion-label class="ion-text-center">{{p.nombre}}</ion-label>
            <ion-label class="ion-text-center">{{ p.precio |currency}}</ion-label>
          </ion-col>
          <ion-col size="5">
            <div class="ion-text-center">{{p.descripcion}}</div>
          </ion-col>
          <ion-col size="3">
            <ion-label><strong>Cantidad</strong></ion-label>
            <ion-icon class="ion-text-center" (click)="aumentarDismuir(p.cantidad, i , 2)" style="margin: 4px; background: #bbbbbb;" name="remove-outline"></ion-icon>
            <span class="ion-text-center" style="position: relative; top: -7px;">{{p.cantidad}}</span> 
            <ion-icon class="ion-text-center" (click)="aumentarDismuir(p.cantidad, i , 1)"  style="margin: 4px; background: #bbbbbb;" name="add-outline"></ion-icon>
          </ion-col>
          <ion-col size="2" class="ion-align-items-center">
            <ion-button class="ion-text-center" size="small" (click)="presentAlertConfirm(i)" color="medium" style="height: 18px; width: 33px; font-size: 12px;">
              <ion-icon name="close-outline"></ion-icon>
            </ion-button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>
    <ion-item>
      <ion-label>
        <h3>Sub total</h3>
        <h3>{{suma | currency}}</h3>
      </ion-label>
    </ion-item>
    <ion-item *ngIf="tipoEnvio === 2 ">
      <ion-label>
        <h3>Costo de envio</h3>
        <h3>{{30 | currency}}</h3>
      </ion-label>
    </ion-item>
    <ion-item>
      <ion-label>
        <h3>Total a pagar</h3>
        <h3>{{sumaTotal | currency}}</h3>
      </ion-label>
    </ion-item>
  </ion-list>
  <div>
    <ion-button (click)="realizarPedido()" expand="block">Realizar Pedido</ion-button>
  </div>

</ion-content>