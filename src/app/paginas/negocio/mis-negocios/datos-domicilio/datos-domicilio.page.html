<ion-header>
  <ion-toolbar class="tolbar">
    <ion-title>Datos de domicilio</ion-title>
    <ion-buttons *ngIf="negocioTO.id_negocio !== null && negocioTO.id_negocio !== undefined" slot="start">
      <ion-button (click)="regresarMis()" class="blanco">
        <ion-icon name="chevron-back-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-buttons slot="end">
      <ion-button (click)="cancelar()">
        <ion-icon name="close-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
  
</ion-header>

<ion-content>
  <ion-card>
    <ion-card-content>
      <form #formDomicilio="ngForm" class="form-horizontal" (ngSubmit)="guardar(formDomicilio)">
        <ion-list>
          <ion-item>
            <ion-label position="stacked">Calle: <span style="color: red">*</span></ion-label>
            <ion-input id="calle"  name="calle" type="text"  #calleNego="ngModel" [(ngModel)]="negocioTO.det_domicilio.calle" required></ion-input>
          </ion-item>
          <div *ngIf="calleNego.touched  && calleNego.invalid" class="alert">
            <div *ngIf="calleNego.errors.required">la calle es requerido</div>
          </div>
          <ion-item>
            <ion-label position="stacked">Número Exterior: <span style="color: red">*</span></ion-label>
            <ion-input id="numExt"  name="numExt" type="text"  #numExtNego="ngModel" [(ngModel)]="negocioTO.det_domicilio.numero_ext" required></ion-input>
          </ion-item>
          <div *ngIf="numExtNego.touched  && numExtNego.invalid" class="alert">
            <div *ngIf="numExtNego.errors.required">el numero exterior es requerido</div>
          </div>
          <ion-item>
            <ion-label position="stacked">Número Interior: <span style="color: red">*</span></ion-label>
            <ion-input id="numInt"  name="numInt" type="text"  #numIntNego="ngModel" [(ngModel)]="negocioTO.det_domicilio.numero_int"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label position="stacked">Estado <span style="color: red">*</span></ion-label>
            <ion-select placeholder="{{ estadoAux }}" [disabled]="btnEstado"  ok-text="Ok" cancel-text="Cancelar" name="estado" required #compEstado="ngModel" [(ngModel)]="negocioTO.det_domicilio.id_estado"
            (ionChange)="get_list_cat_municipio($event)">
            <ng-container *ngFor="let e of list_cat_estado">
              <ion-select-option [value]="e.id_estado">{{e.nombre}}</ion-select-option>
          </ng-container>
        </ion-select>
          </ion-item>
          <div *ngIf="compEstado.invalid" class="alert">
            <div>Seleccione un Estado</div>
          </div>
          <ion-item>
            <ion-label position="stacked">Municipio <span style="color: red">*</span></ion-label>
            <ion-select placeholder="{{ municiAux }}" [disabled]="btnMuncipio" ok-text="Ok" cancel-text="Cancelar" name="municipio" required #compMunicipio="ngModel" [(ngModel)]="negocioTO.det_domicilio.id_municipio"
            (ionChange)="get_list_cat_localidad($event)">
            <ng-container *ngFor="let mun of list_cat_municipio">
              <ion-select-option [value]="mun.id_municipio">
                {{mun.nombre}}
              </ion-select-option>
            </ng-container>
            </ion-select>
          </ion-item>
          <div *ngIf="compMunicipio.invalid" class="alert">
            <div>Seleccione un Municipio</div>
          </div>
          <ion-item>
            <ion-label position="stacked">Localidad <span style="color: red">*</span></ion-label>
            <ion-select placeholder="{{ localiAux }}" [disabled]="btnLocalidad" ok-text="Ok" cancel-text="Cancelar" name="localidad" required  #compLocalidad="ngModel" [(ngModel)]="negocioTO.det_domicilio.id_localidad">
              <ng-container *ngFor="let loc of list_cat_localidad">
              <ion-select-option [value]="loc.id_localidad">
                {{loc.nombre}}
              </ion-select-option>
            </ng-container>
            </ion-select>
          </ion-item>
          <div *ngIf="compLocalidad.invalid" class="alert">
            <div>Seleccione una Localidad</div>
          </div>
          <ion-item>
            <ion-label position="stacked">Colonia <span style="color: red">*</span></ion-label>
            <ion-input id="colonia"  name="colonia" type="text"  #coloniaNego="ngModel" [(ngModel)]="negocioTO.det_domicilio.colonia" required></ion-input>
          </ion-item>
          <div *ngIf="coloniaNego.touched  && coloniaNego.invalid" class="alert">
            <div *ngIf="coloniaNego.errors.required">la colonia es requerido</div>
          </div>
          <br>
          <ion-label>Selecciona la ubicación de tu negocio en este mapa<span style="color: red">(ESTE PUNTO ES OBLIGATORIO) * </span>:</ion-label>
          <ion-grid>
            <ion-row>
              <ion-col>
                <div id="mapId" style="height:200px;"></div>
              </ion-col>
            </ion-row>
            <ion-button size="small" class="bg-rosa" type="button" (click)="localizacionTiempo(1)">
              <ion-icon name="navigate-circle-outline"></ion-icon>
              Ubicación Actual
            </ion-button>
          </ion-grid>
          <ion-item>
            <ion-label >Los campos con <span style="color: red">*</span> son obligatorios</ion-label>
          </ion-item>
          <ion-button expand="block" type="submit" class="bg-rosa" [disabled]="formDomicilio.invalid">
            <span *ngIf="negocioTO.id_negocio === null || negocioTO.id_negocio === undefined">Guardar</span>
            <span *ngIf="negocioTO.id_negocio !== null && negocioTO.id_negocio !== undefined">Actualizar</span>
          </ion-button>
        </ion-list>
      </form>
      <ion-grid>
        <ion-row>
          <ion-col>
            <div>
              <ion-button expand="block" (click)="regresar()" type="submit" class="bg-rosa">Atras</ion-button>
            </div>
          </ion-col>
          <ion-col>
            <div>
              
            </div>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-card-content>
  </ion-card>
    
</ion-content>



