<!--<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Productos
    </ion-title>
  </ion-toolbar>
</ion-header>-->

<ion-content [fullscreen]="true" [scrollEvents]="true"  (ionScroll)="cordenada = $event.detail.scrollTop">

  <app-boton-top [content]="content" [cordenada]="cordenada" ></app-boton-top>
  <ion-header collapse="condense">
    
  </ion-header>





  <!--<ion-searchbar></ion-searchbar>-->
  <app-toolbar-busqueda placeHolder="Buscar negocios" (buscarEmit)="buscarToolbar($event)"></app-toolbar-busqueda>
  <ion-item>
    <ion-buttons  *ngIf=" filtroActivo" slot="start">
      <ion-chip (click)="borrarFiltros()" color="danger">
        <ion-icon name="trash-outline" color="danger"></ion-icon>
        <ion-label>Borrar Filtros</ion-label>
      </ion-chip>
    </ion-buttons>
    <ion-buttons slot="end">
      <ion-button (click)="abrirFiltros()">Filtrar
        <ion-icon name="filter-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-item>
  <ion-grid>
    <ion-row>
      <ion-col>
        <div id="abcedario" class="scrolling-wrapper-flexbox">
          <div class="item" *ngFor="let filtro of filtroABC">
            <ion-button size="small" color="danger" (click)="filtrarABC(filtro)" [ngClass]="{active:filtro.id === filtroCheckend}" [disabled]="!filtro.activo">{{filtro.letra}}</ion-button>
          </div>
        </div>
        <p><br></p>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <ion-list>
          <ion-item-sliding *ngFor="let producto of lstProductos">
          <ion-item lines="none" #datos (click)="abrirProducto(producto)">
            <ion-thumbnail slot="start">
              <img src="https://ecoevents.blob.core.windows.net/comprandoando/img_default/Producto.png"
              [srcset]="producto.imagen">
            </ion-thumbnail>
            <ion-label>
              <h2>{{producto.nombre}}</h2>
              <h3>{{(producto.nombre_categoria1 != null)?producto.nombre_categoria1:'Sin categoría'}}</h3>
              <div class="ui-search-item__title">
                <ion-text>{{(producto.descripcion != null)?producto.descripcion:'Sin descripción'}}</ion-text>
              </div>
              <div>
                <ion-text color="success">${{(producto.precio != '')?((producto.precio != null)?producto.precio:'Sin precio'):'Sin precio'}}</ion-text>
              </div>
              <div>
                <ion-badge color="primary">{{producto.tipo}}</ion-badge>
                <ion-badge color="medium">{{(producto.ubicacion != null)?producto.ubicacion.nombre_localidad:'Sin ubicación'}}</ion-badge>
              </div>
            </ion-label>
          </ion-item>
          <ion-item-options side="end" *ngIf="motrarContacto">
            <ion-item-option *ngIf="producto.likes>0;else templateName" color="danger" (click)="darLike(producto)">
              <ion-icon name="heart-outline"></ion-icon>{{producto.likes}}
            </ion-item-option>
            <ng-template #templateName>
              <ion-item-option *ngIf="producto.likes === 0" class="grus" (click)="darLike(producto)">
                <ion-icon name="heart-outline"></ion-icon>
              </ion-item-option>
            </ng-template>
          </ion-item-options>
          </ion-item-sliding>
        </ion-list>

        <ion-infinite-scroll threshold="100px" (ionInfinite)="loadData($event)" *ngIf="scroll">
          <ion-infinite-scroll-content
                  loadingSpinner="bubbles"
                  loadingText="Cargando mas productos...">
          </ion-infinite-scroll-content>
        </ion-infinite-scroll>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
